<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
       
       //Ejercicio 1 
        
      /*  function contarCaracteres(cadena=""){

        if(!cadena){
            console.warn("No ingresaste ninguna cadena");
        }else{
            console.info(`La cadena ${cadena} tiene ${cadena.length} caracteres`);
        }    
        }

        contarCaracteres(prompt());*/
        

        const contarCaracteres = (cadena = "") => 
         (!cadena) 
          ? console.warn("No ingresaste ninguna cadena") 
          : console.info(`La cadena ${cadena} tiene ${cadena.length} caracteres`);

      //  contarCaracteres();
      //  contarCaracteres("Ho");


        //Ejercicio 2

        //Usamos splice para poder cortar la cadena

        function RecorteCaracteres(cadena="",tamaño=undefined) {
            if (!cadena) {
                console.warn("No ingresaste Cadena");
            }if(tamaño = undefined){
                console.warn("No ingresaste la longitud para recortar el texto")
            }else{
                console.info(cadena.slice(0,4));
            }
        }

       // RecorteCaracteres("Hola mundo",4)

       //Ejercicio 3

        const CadenaAArreglo = (cadena = "", separador=undefined) =>
          (!cadena)
           ? console.warn("No ingresaste ninguna cadena") 
           :(separador===undefined)
            ? console.warn("No ingresaste el caracter separador") 
             : console.info(cadena.split(separador));
             
            //  CadenaAArreglo("Hola Verda"," ");


        //Ejercicio 4 

        const repeticion = (texto = "", veces = undefined) => {
            if (!texto)return console.warn("No ingresaste un texto");

            if(veces === undefined) return console.warn("No ingresaste el numero de veces a repetir el texto")

            if(Math.sign(veces)===-1) return console.error("No ingreses negativos")

            for(let i=0; i<veces; i++) console.info(`${texto} - ${i}`);
        }

        // repeticion("Humildad", 5);

        //Ejercicio 5 

        const invertirCadena = (cadena = "") =>
        (!cadena)
        ?console.warn("No ingresaste cadena")
        :console.info(cadena.split("").reverse().join(""));


        // invertirCadena("Alianza Lima");



        //Ejercicio 6

        const palabraRepetida = (cadena = "", palabra = undefined) =>  {
            if(!cadena) return console.warn("No ingresaste el texto largo");

            if(!palabra) return console.warn("No ingresaste la palabra a evaluar");

            let i = 0,
            cont = 0;

            while (i!==-1) {
                // Con el metodo (frase).indexOF(palabra , desde que posicion buscar) tu puedes buscar cuantas veces se repite  la palabra a buscar;
                i=cadena.toLowerCase().indexOf(palabra.toLowerCase(),i);
                console.log(i);
                if (i!==-1) {
                    i++;
                    cont++;
                }
            }

            return console.info(`La palabra ${palabra} se repite ${cont} veces`);


        }

        // palabraRepetida("Hola mundo estoy hola Hola","hola");


        //Ejercicio numero 7

        const palindromo = (palabra = "") => {
            if (!palabra) {
                console.warn("No ingresaste palabra en consola");
            }else if(palabra.split("").reverse().join("").toLowerCase()===palabra.toLowerCase()){
                console.info("Es capicua");
            }else{
                console.info("No es capicua");
            }
        }

        // palindromo("hOLA");
        // palindromo("Salas");



        //Ejercicio numero 8


        const eliminarCaracteres = (texto = "", patron = "") =>{
            (!texto)
            ?console.warn("No ingresaste un texto")
            :(!patron)
            ?console.warn("No ingresaste el patron a buscar")
            //En el metodo replace(caracter a elimiinar,conque remplazar)-----Expresion Regula RegExp(patron,"ig")=> i-> busque con mayusculas y minusculas --- g->Que nose queda en la primera coincidencia;
            :console.info(texto.replace(new RegExp(patron,"ig"),""));
        }

    //  eliminarCaracteres("Hola Comunicacion","Hola");
       

        //Ejercicio numero 9 

        const NumeroAleatorio = () => console.info(Math.round((Math.random()*100)+500));
            
      //  NumeroAleatorio();

        //EJercicio numero 10

        const palindromoNumero = (numero = 0) => {
           if(!numero) return console.warn("No ingresaste un numero");

           if(typeof numero !== "number") return console.error(`El valor ${numero} ingresado. No es un numero`);


           numero = numero.toString();
           
           let alReves = numero.split("").reverse().join("");

           return(numero ===alReves)
           ?console.info("Es capicua")
           :console.info("No es capicua");

        }

      //  palindromoNumero(2002);



      //Ejercicio  numero 11

          const factorial = (n=undefined) =>{
          if(typeof n!=="number") return console.warn("No ingresaste un numero");

          if(n<=0) return console.warn("No se ingresa un numero negativo");

          let r=1;
          for (let i = n; i> 1; i--) {  
                r *= i;
          }

                return console.info(`El factorial es ${r}`);
            }

          //  factorial(5);

        
    // EJercicio numero 12

    const primo = (numero = "") =>{
        if(typeof numero !== "number") return console.warn("No ingresar cadenas de Textos");

        if(numero<=0) return console.warn("No ingresar numeros menores o iguales a 0");

        let divisible  = false;

        for(let i = 2; i<numero; i++){
            if ((numero%i)===0) {
                divisible = true;
                break;
            }
        }

        return (divisible)
        ?console.log(`El numero ${numero} no es primo`)
        :console.log(`El numero ${numero} si es primo`)

    }

   // primo(19);


   //EJercicio numero 13

   const parOinpar = (numero = "") => {
        if(typeof numero !== "number") return console.warn("No ingresar cadenas de Textos");

        if(numero<0) return console.warn("No ingresar numeros menores a 0");

        if((numero%2) === 0){
            return console.log(`El numero ${numero}  es par`);
        }else{
            return console.log(`El numero ${numero}  es impar`);
        }
   }

//    parOinpar(9);




   //Ejercicio numero 15

   const convertirBinarioDecimal= (numero = undefined, base=undefined) =>{
        if(numero === undefined) return console.warn("No ingresaste el numero a convertir");

        if(typeof numero!== "number")  return console.warn("No ingresaste un numero en la base");

        if(base === undefined)  return console.warn("No ingresaste la base a convertir");

        if(typeof base!== "number")  return console.warn("No ingresaste un numero en la base");

        if (base === 2) {
            return console.info(`${numero} base ${base} = ${parseInt(numero,base)} base 10 `);
        }
   }


   //Ejercicio numero 16
   
   const descuento = (total = undefined, porcentaje = undefined) =>{
    if(total === undefined) return console.warn("No ingresaste el numero a convertir");

    if(typeof total!== "number")  return console.warn("No ingresaste un numero en la base");

    if(porcentaje === undefined)  return console.warn("No ingresaste la base a convertir");

    if(typeof porcentaje !== "number")  return console.warn("No ingresaste un numero en la base"); 

    return console.info(`El total es ${total-((total*porcentaje)/100)}`);
   }


   //descuento(1000,20);

    //Ejercicio numero 17


    const calcularAnio = (fecha = undefined) =>{
        if(fecha === undefined) return console.warn("No ingresaste la fecha");

        if(!(fecha instanceof Date)) return console.error("El valor que ingresaste no es una fecha");

        let hoyMenosFecha = new Date().getTime() - fecha.getTime(),

        milisegundos = 1000 * 60 * 60 * 24 * 365

        aniosHumanos = Math.floor(hoyMenosFecha / milisegundos);

        return (Math.sign(aniosHumanos)== -1)
        ? console.info(`Faltan ${Math.abs(aniosHumanos)} años para el ${fecha.getFullYear()}`)
        :(Math.sign(aniosHumanos)==1)
         ?console.info(`Han pasado ${aniosHumanos} años, desde ${fecha.getFullYear()}`)
         :console.info(`Estamos en el años actual ${fecha.getFullYear()}`);

    }

   // calcularAnio(new Date(1994,3,21));



    //Ejercicio 18

    const contarLetra = (cadena="") =>{
        if(!cadena) return console.warn("No ingresaste una cadena de texto");

        if(typeof cadena !=="string") return console.error(`El valor ${cadena} no es una cadena de texto`);

        let vocales = 0,
        consonantes = 0;

        cadena = cadena.toLowerCase();

        for (let letra of cadena) {
            if (/[AEIOUÁÉÍÓÚaeiouáéíóú]/g.test(letra))  vocales++;
            
            if (/[BCDFGHJKLMNPQRSTVWXYZbcdfghjklmnpqrstwxyz]/g.test(letra)) consonantes++;
            
        }

        return console.info({
            cadena: cadena,
            vocales: vocales,
            consonantes: consonantes
        });
    }

//      contarLetra("Hola mundo Amor");


  //Ejercicio 19


    const  validarNombre = (nombre="")=>{
        if(!nombre) return console.warn("No ingresaste una cadena de texto");
        
        if(typeof nombre !=="string") return console.error(`El valor ${nombre} no es una cadena de texto`);

        let ExpReg=/^[A-Za-zÑñÁáÉéÍíÓóÚú\s]+$/g.test(nombre);
        return (ExpReg)
        ? console.log("eL NOMBRE ES VALIDO")
        : console.log("eL NOMBRE NO ES VALIDO");
    }

  //  validarNombre("Josau");


    //Ejercicio 20


    //Video 40 

    const  validarEmail = (email="")=>{
        if(!email) return console.warn("No ingresaste un email");
        
        if(typeof email !=="string") return console.error(`El valor ${email} no es una cadena de texto`);

        let ExpReg= /[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})/i.test(email);
        return (ExpReg)
        ? console.log("eL email ES VALIDO")
        : console.log("eL email NO ES VALIDO");
    }


   // validarEmail("josuedominguezh@upeu.edu.pe")


    // video 41

    //  Ejercicio 21

    const devuelveArray = (arreglo= undefined)=>{
        if(!arreglo) return console.warn("No ingresaste un arreglo");

        if(!(arreglo instanceof Array)) return console.warn("No ingresaste un arreglo");

        if(arreglo.length === 0) return console.warn("Arreglo vacio");

        for (let num of arreglo) {
            if (typeof num!== "number") return console.error(`El valor ${num} ingresado NO es un numero`);
        }

        const newArr = arreglo.map(a => a*a);
        //const newArr = arreglo.map(a => a+"Hola");


        return console.info(`El arreglo original: ${arreglo},\nArreglo elevado al cuadrado${newArr}`);

    }


    // devuelveArray([1,3,4]);


    //Ejercicios 22



    const numeroAlto = (arr = undefined) =>{
        if(!arr) return console.warn("No ingresaste un arreglo");

    if(!(arr instanceof Array)) return console.warn("No ingresaste un arreglo");

        if(arr.length === 0) return console.warn("Arreglo vacio");

    for (let num of arr) {
    if (typeof num!== "number") return console.error(`El valor ${num} ingresado NO es un numero`);
    }   

    //Obligatorio usar el spread operator

    return console.info(`Arreglo Original: ${arr}\nValor mayor ${Math.max(...arr)}\n Valor Menor ${Math.min(...arr)}`)
    }

   // numeroAlto([10,1000,200]);

    //Ejercicio 23


    const arrayParImpar = (arr = undefined) =>{
    if(!arr) return console.warn("No ingresaste un arreglo");


    if(!(arr instanceof Array)) return console.warn("No ingresaste un arreglo");


    if(arr.length === 0) return console.warn("Arreglo vacio");


    for (let num of arr) {
    if (typeof num!== "number") return console.error(`El valor ${num} ingresado NO es un numero`);
    }  
    
    return console.info({
        pares:arr.filter(num => num%2 ===0),
        impares:arr.filter(num => num%2 ===1)
    })
    
    }

    //arrayParImpar([2,5,7,2,4,8,18,19]);

    //Ejercicio 24

    const ordenarArray = (arr = undefined) =>{
    if(!arr) return console.warn("No ingresaste un arreglo");


    if(!(arr instanceof Array)) return console.warn("El valor no es arreglo");


    if(arr.length === 0) return console.warn("Arreglo vacio");

    
    for (let num of arr) {
    if (typeof num!== "number") return console.error(`El valor ${num} ingresado NO es un numero`);   
    } 
    
    return console.info({
        arr,
        asc: arr.map(el=>el).sort(),
        desc: arr.map(el=>el).sort().reverse()
    });
    }

    // ordenarArray([8,9,7,1,0,2,5]);
    // ordenarArray({});


    //Ejercicio 25

    const quitarDuplicados = (arr = undefined) =>{

        if(!arr) return console.warn("No ingresaste un arreglo");

        if(!(arr instanceof Array)) return console.warn("El valor no es arreglo");

        if(arr.length === 0) return console.warn("Arreglo vacio");

        if(arr.length === 1) return console.warn("Arreglo debe tener mínimo 2 elementos");

        // return console.info({
        //     original: arr,
        //     //Si hay duda ver la descripcion de mozzila developer network
        //     sinDuplicados: arr.filter((value,index,self)=>self.indexOf(value)==index)
        // });

        return console.info({
            original: arr,
            sinDuplicados: [...new Set(arr)]
        })
    }

  //  quitarDuplicados([34,34,true,"Hola"]);


    //Ejercicio 26


    const promedio = (arr = undefined) =>{

        if(!arr) return console.warn("No ingresaste un arreglo");

        if(!(arr instanceof Array)) return console.warn("El valor no es arreglo");

        if(arr.length === 0) return console.warn("Arreglo vacio");

        for (let num  of object) {
            if(typeof num !== "number")return console.warn("Solo se permite ingresar numeros");
        }


        return console.info(
            arr.reduce((total,num,index,arr)=>{
                total += num;
                if (index===arr.length-1) {
                    return `El promedio de ${arr.join(" + ")} es ${total/arr.length}`
                }else{
                    return total;
                }
            })
        )
    }


    //Ejercicio 27

    class Pelicula {
        constructor({id,titulo,director,estreno,pais,generos,calificacion}){
            this.id = id;
            this.titulo=titulo;
            this.director = director;
            this.estreno = estreno;
            this.pais = pais;
            this.generos = generos;
            this.calificacion = calificacion;

            this.validarIMDB(id);
            this.validarTitulo(titulo);
            this.validarDirector(director);
            this.validarEstreno(estreno);
            this.validarPais(pais);
            this.validarGeneros(generos);
            this.validarCalificacion(calificacion);
        }

        static get listaGeneros() {
            return  ["Action","Adult", "Adventure", "Animation", "Biography","Comedy", "Crime", "Documentary" ,"Drama", "Family", "Fantasy", "Film Noir", "Game-Show", "History", "Horror", "Musical", "Music", "Mystery", "News", "Reality-TV", "Romance", "Sci-Fi", "Short", "Sport", "Talk-Show", "Thriller", "War", "Western"];
        }

        static generosAceptados(){
            return console.info(`Los generos aceptados son ${Pelicula.listaGeneros.join(", ")}`);
        }

        validarCadena(propiedad,valor){
            if(!valor) return console.warn(`${propiedad} ${valor} esta vacio`);

            if(typeof valor !== "string") return console.error(`${propiedad} ${valor} ingresado no es una cadena de texto`);

            return true;

        }

        validarNumero(propiedad,valor){
            if(!valor) return console.warn(`${propiedad} ${valor} esta vacio`);

            if(typeof valor !== "number") return console.error(`${propiedad} ${valor} ingresado no es un número`);

            return true;    
        }

        validarLongitudCadena(propiedad,valor,longitud){
            if (valor.length>longitud) {
                return console.error(`${propiedad} ${valor} excede el numero de caracteres permitidos (${longitud})`)
            }

            return true;
        }


        validarArreglo(propiedad,valor){
            if(!valor)return console.warn(`${propiedad} ${valor} esta vacio`);

            if(!(valor instanceof Array))return console.error(`${propiedad} ${valor} ingresado no es un arreglo`);

            if(valor.length === 0) return console.error(`${propiedad} ${valor} no tiene datos`);

            for (let cadena of valor) {
                if(typeof cadena !== "string") return console.error(`El valor ${cadena} ingresado, No es una cadena de texto`);
            }

            return true;

        }

        //  IMDB ID

        validarIMDB(id){
            if (this.validarCadena("IMDB id",id)) {
                if (!(/^([a-z]){2}([0-9]){7}$/.test(id))) {
                    return console.error(`IBMD id ${id} no es valido, debe tener 9 caracteres, los 2 primeros letras minusculas, los 7 restantes numeros`)
                }
            }
        }

        //  Titulo

        validarTitulo(titulo){
            if (this.validarCadena("Titulo",titulo)) {
                this.validarLongitudCadena("Titulo",titulo,100);
            }
        }

        //  Director

        validarDirector(director){
            if (this.validarCadena("Director",director)) {
                this.validarLongitudCadena("Director",director,50);
            }
        }
    

        //  Estreno

        validarEstreno(estreno){
            if (this.validarNumero("Año de Estreno",estreno)) {
                if (!(/^([0-9]){4}$/.test(estreno))) {
                    return console.error(`El año de estreno ${estreno} no es valido, debe tener 4 caracteres, todos numeros`);
                }
            }
        }


    // Pais

        validarPais(pais){
            this.validarArreglo("Pais",pais);
        }
    

    // Generos

        validarGeneros(generos){
                if (this.validarArreglo("Genero",generos)) {
                    for (let genero of generos) {
                        // console.log(genero,Pelicula.listaGeneros.includes(genero))
                        if (!Pelicula.listaGeneros.includes(genero)) {
                            console.error(`Genero(s) incorrectos ${generos.join(", ")}`);
                            Pelicula.generosAceptados();
                        }
                    }
                }
        }

        // Calificacion

        validarCalificacion(calificacion){
            if (this.validarNumero("Calificacion",calificacion)) {
               return(calificacion<0 || calificacion> 10)
                ?console.error(`La calificacion tiene que estar en un rango entre 0 y 10`)
                :this.calificacion = calificacion.toFixed(1);
            }
        }


    

    fichaTecnica(){
        console.info(`Ficha Tecnica:\nTitulos: ${this.titulo}\nDirector: ${this.director}\nAño: ${this.estreno}\nPais: ${this.pais.join(" - ")}\nGéneros: ${this.generos.join(",")}\nCalificación${this.calificacion}\nIMBD Id: ${this.id}` )
    }
}
        
    // Pelicula.generosAceptados();
    const peli = new Pelicula(
        {
        id : "tt1234567",
        titulo:"Titulo de la peli",
        director: "12331312312333333333333333333213123123213121",
        estreno:2010,
        pais:["Bolivia","Peru"],
        generos:["Comedy"],
        calificacion: 10
        }
);

    peli.forEach(el => new Pelicula(el).fichaTecnica());
       
        
        </script>
</body>
</html>